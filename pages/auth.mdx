# ðŸ“ Authentication

## Login

This endpoint is used to authenticate a user and obtain an access token.

### Method: POST

> ```
> /auth/login
> ```

### Request Body

- email (string): The email of the user.
- password (string): The password of the user.

```json
{
  "email": "",
  "password": ""
}
```

### Response

The response is a JSON object with the following schema:

```json
{
  "account": {
    "id": "",
    "name": "",
    "email": "",
    "type": "",
    "provider": "",
    "roles": [
      {
        "id": "",
        "name": "",
        "permissions": [""],
        "description": ""
      }
    ],
    "description": "",
    "verified": true,
    "enabled": true
  },
  "token": ""
}
```

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## Register

This endpoint allows the registration of a new user. Most of the optional parameters are used to create confirmation email to be sent to the newly created users email.

### Method: POST

> ```
> /auth/register
> ```

### Request Body

- name (text, required): The name of the new user.
- email (text, required): The email address of the new user.
- password (text, required): The password for the new user.
- redirectHost (text, optional): The redirect host for the registration process.
- confirmEmailRedirectEndpoint (text, optional): The endpoint for redirecting after email confirmation.
- dashboardEndpoint (text, optional): The endpoint for redirecting to the dashboard after registration.
- projectName (text, optional): The name of the project.

**_NOTE:_**
The confirm account token is not returned in the `/auth/register` response, only sent to the users email for secutiry reasons.

```json
{
  "name": "New User",
  "email": "new@user.com",
  "password": "password",
  "redirectHost": "https://oxideauth-api.nebuladev.io",
  "confirmEmailRedirectEndpoint": "/auth/sign-in",
  "dashboardEndpoint": "/dashboard",
  "projectName": "OxideAuth"
}
```

### Response

The response will be in JSON format with the following schema:

```json
{
  "user": {
    "id": "",
    "name": "",
    "email": "",
    "type": "",
    "provider": "",
    "roles": [],
    "description": null,
    "imageUrl": "",
    "verified": true,
    "enabled": true
  },
  "token": ""
}
```

The "user" object contains information about the registered user, including their ID, name, email, type, provider, roles, description, image URL, verification status, and enabled status. The "token" field will be empty in the response.

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## Confirm Account

This endpoint is used to confirm a user's account with the provided token, usually sent to the users email address. This URL is normally automatically generated by the regsiter end-point and included in the confirm account email sent to the user on registration. The request should include the token, redirect URL, dashboard URL, and project name.

**_NOTES:_**

- The confirm account token is not returned in the `/auth/register` response, only sent to the users email for security reasons.
- If the `VERIFY_ACCOUNT=false` flag is set in the environment, the account will automatically be assigned to `confimred=true`, there is no need to confirm account.

### Method: GET

> ```
> /auth/confirm-account?token={token}&redirectUrl={redirectUrl}&dashboardUrl={dashboardUrl}&projectName={projectName}
> ```

### Query Params

| Param        | value                                       |
| ------------ | ------------------------------------------- |
| token        | TOKEN                                       |
| redirectUrl  | https://oxideauth.nebuladev.io/auth/sign-in |
| dashboardUrl | https://oxideauth.nebuladev.io/             |
| projectName  | OxideAuth                                   |

### Response

```json
{
  "account": {
    "id": "",
    "name": "",
    "email": "",
    "type": "",
    "provider": "",
    "roles": [
      {
        "id": "",
        "name": "",
        "permissions": [""],
        "description": ""
      }
    ],
    "description": "",
    "verified": true,
    "enabled": true
  }
}
```

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## Request Reset Password

This endpoint allows the user to request a password reset. The request should include the user's email, redirect URL, and project name in the request body. Upon successful execution, an email with a redirect URL is sent to the user, a token is included in the URL which should be submitted with the updated password. The API returns a JSON response with a "success" key set to true or flase.

### Method: POST

> ```
> /auth/reset-password
> ```

### Request Body

- email (text, required): Email of the user.
- redirectUrl (text, required): Redirect URL that will be added to email.
- projectName (text, optional): Used in handler to get email template.

```json
{
  "email": "subaquatic.pierre@gmail.com",
  "redirectUrl": "https://oxideauth.nebuladev.io/auth/update-password",
  "projectName": "OxideAuth"
}
```

### Response

The response will be in JSON format with the following schema:

```json
{
  "success": true | false
}
```

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## Submit Update Password

This endpoint is used to update the users password.

### Method: POST

> ```
> /auth/update-password
> ```

### Request Body

- token (string, required): The token for password reset, usually sent to the users email after submitting request password reset.
- password (string, required): The new password.

```json
{
  "token": "{password reset token}",
  "password": "updatedPassword"
}
```

### Response

The response for this request is in JSON format and follows the schema below:

```json
{
  "message": "string",
  "status": "string"
}
```

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## End-point: ResendConfirmLink

### Method: POST

> ```
> /auth/resend-confirm
> ```

### Body (**raw**)

```json
{
  "email": "subaquatic.pierre@gmail.com",
  "redirectHost": "http://localhost:8081/",
  "confirmEmailRedirectEndpoint": "/auth/sign-in",
  "dashboardEndpoint": "/admin",
  "projectName": "CodaWeb"
}
```

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## End-point: ResetPassword

### Method: POST

> ```
> /auth/reset-password
> ```

### Body (**raw**)

```json
{
  "email": "subaquatic.pierre@gmail.com",
  "redirectUrl": "/auth/update-password",
  "projectName": "CodaWeb"
}
```

âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ âƒ

## End-point: UpdatePassword

### Method: POST

> ```
> /auth/update-password
> ```

### Body (**raw**)

```json
{
  "token": "",
  "password": "AMAZING"
}
```
